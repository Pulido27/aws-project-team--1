import time
import subprocess
import resource

# Registra el tiempo de inicio
inicio = time.perf_counter()

# Ejecuta el script que contiene tu código.
subprocess.run(["python3", "/home/ubuntu/python_code/gen_index"])

# Registra el tiempo al finalizar
fin = time.perf_counter()

# Calcula el tiempo transcurrido en milisegundos
tiempo_ms = (fin - inicio) * 1000

# Obtiene el uso de recursos del proceso hijo
usoRecursos = resource.getrusage(resource.RUSAGE_CHILDREN)
max_mem_kb = usoRecursos.ru_maxrss  # en kilobytes
max_mem_mb = max_mem_kb / 1024       # convierte a megabytes

print(f"Tiempo de ejecución: {tiempo_ms:.4f} milisegundos")
print(f"Uso máximo de memoria: {max_mem_mb:.2f} MB")
